# Workflow Adı: GitHub Actions sekmesinde bu isimle görünecek.
name: Generate Snake Graph

# Çalışma Zamanlaması: Her 6 saatte bir çalışır.
on:
  schedule:
    - cron: "0 */6 * * *"
  # Manuel çalıştırmaya izin verir.
  workflow_dispatch:

# Yetkilendirme: Dosya yazma yetkisi zorunludur.
permissions:
  contents: write

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
      # 1. Repoyu Çekme
      - name: Checkout Repository
        uses: actions/checkout@v2

      # 2. Snake SVG'yi Oluşturma (KESİN Dark Mode Teması ile)
      - name: Generate Snake SVG (True Dark Mode)
        uses: Platane/snk/svg-only@v3
        with:
          github_user_name: ${{ github.repository_owner }}
          outputs: dist/github-snake-dark.svg
          
          # ----------------------------------------------------
          # KESİN DARK MODE AYARLARI (GÖRSEL SORUNUNU GİDERİR)
          # ----------------------------------------------------
          theme: "dark" # Genel dark mode temasını ayarlar
          
          # ARKA PLAN RENGİ: Tüm grafiğin arka planını GitHub koyu moduna getirir.
          background_color: "#0d1117" 
          
          # YILANIN RENGİ: Yılanın kendisinin rengi (GitHub yeşili tonu).
          snake_color: "#39d353" 
          
          # KATKISIZ NOKTALARIN RENGİ: Boş karelerin rengini belirler.
          # GitHub Dark mode'daki daha koyu gri tonlarından biri.
          color_dots: "#161b22" 
          
          # OPSİYONEL: Katkı seviyelerine göre diğer renkler (daha detaylı kontrol için)
          # palette: "0d1117,161b22,216e39,30a14e,39d353" # Boş, az, orta, çok katkı renkleri
          # Bu parametreleri yukarıdaki background_color ve color_dots daha belirleyici olduğu için
          # şimdilik tek tek renklerle ayarladım.
          # İsterseniz palette ile de oynayabilirsiniz, ancak genellikle background_color ve color_dots yeterlidir.

      # 3. Yalnızca Dağıtım (Output Dalına Yayınlama)
      - name: Deploy to GitHub Pages (Output Branch)
        uses: crazy-max/ghaction-github-pages@v2.1.3
        with:
          target_branch: output
          build_dir: dist
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
